"use strict";var _createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var DraggableObject=function(){function i(t,e){_classCallCheck(this,i),this.element=t,this.dragged=!1,this.size=this.setSize(t),this.parent=this.setParent(t),this.initialPosition=this.getPosition(t),this.currentPosition=this.getPosition(t),this.actions=this.setActionsData(e),this.draggable()}return _createClass(i,[{key:"setSize",value:function(t){return{width:t.offsetWidth,height:t.offsetHeight}}},{key:"getPosition",value:function(t){return{top:t.offsetTop,left:t.offsetLeft}}},{key:"getPlacement",value:function(t){return{top:t.offsetTop,right:t.offsetLeft+t.offsetWidth,left:t.offsetLeft,bottom:t.offsetTop+t.offsetHeight}}},{key:"setParent",value:function(t){var e=t.parentElement;return{element:e,size:this.setSize(e),position:this.getPosition(e),placement:this.getPlacement(e)}}},{key:"setActionsData",value:function(t){var e=[];return t.forEach(function(t){e.push({element:t.element,placement:this.getPlacement(t.element),callback:t.callback})}.bind(this)),e}},{key:"draggable",value:function(){this.element.addEventListener("mousedown",this.onDrag.bind(this)),this.element.addEventListener("mouseup",this.onDrop.bind(this)),this.parent.element.addEventListener("mousemove",this.move.bind(this)),this.parent.element.addEventListener("mouseleave",this.onDropOut.bind(this))}},{key:"onDrag",value:function(){this.dragged=!0,this.element.setAttribute("dragged",!0)}},{key:"onDrop",value:function(){this.dragged=!1,this.element.setAttribute("dragged",!1),0<this.actions.length&&this.doActions()}},{key:"onDropOut",value:function(){this.dragged&&(this.element.style.top=this.initialPosition.top,this.element.style.left=this.initialPosition.left,this.dragged=!1,this.element.setAttribute("dragged",!1))}},{key:"move",value:function(){var t;this.dragged&&((t={top:window.event.clientY-this.size.height/2-this.parent.position.top,left:window.event.clientX-this.size.width/2-this.parent.position.left}).top<=0&&(t.top=0,this.element.style.top="0px"),0<t.top&&t.top<this.parent.size.height-this.size.height&&(this.element.style.top=t.top+"px"),t.top>=this.parent.size.height-this.size.height&&(this.element.style.top=this.parent.size.height-this.size.height+"px",t.top=this.parent.size.height-this.size.height),t.left<=0&&(t.left=0,this.element.style.left="0px"),0<t.left&&t.left<this.parent.size.width-this.size.width&&(this.element.style.left=t.left+"px"),t.left>=this.parent.size.width-this.size.width&&(this.element.style.left=this.parent.size.width-this.size.width+"px",t.left=this.parent.size.width-this.size.width),this.currentPosition=t)}},{key:"doActions",value:function(){this.actions.forEach(function(t){this.elementIn(t.placement)&&t.callback()}.bind(this))}},{key:"elementIn",value:function(t){var e=window.event.clientY,i=window.event.clientX;return e>t.top+this.parent.position.top&&e<t.bottom+this.parent.position.top&&i>t.left+this.parent.position.top&&i<t.right+this.parent.position.left}}]),i}();